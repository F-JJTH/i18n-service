<nz-content>
  <header>
    <div nz-row>
      <div nz-col nzSpan="18">
        <form nz-form>
          <nz-form-item>
            <nz-form-control nzSpan="20">
              <input #slugInput nz-input name="slug" type="text" id="slug" [(ngModel)]="slug" placeholder="Slug">
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control nzSpan="20">
              <nz-input-group [nzAddOnAfter]="product.defaultLanguage">
                <input nz-input name="value" type="text" id="value" [(ngModel)]="defaultValue" placeholder="Default value">
              </nz-input-group>
            </nz-form-control>
            <button class="m-l-5" nz-button nzType="primary" [disabled]="!slug || !defaultValue" (click)="onAddNewDefinitionClicked()">Add</button>
          </nz-form-item>
        </form>
      </div>
      <div nz-col nzSpan="6" class="text-right">
        <button class="m-l-5" nz-button nzType="primary" (click)="onImportDefinitionsClicked()">Import definitions</button>
      </div>
    </div>
  </header>

  <nz-table #table [nzData]="definitions" nzSize="middle" [nzPageSize]="25">
    <thead>
      <tr>
        <th>Slug
          <nz-badge
            nzStandalone
            [nzOverflowCount]="99999"
            [nzCount]="definitions.length"
            [nzStyle]="{ backgroundColor: '#fff', color: '#999', boxShadow: '0 0 0 1px #d9d9d9 inset' }"
          ></nz-badge>
        </th>
        <th>Default value</th>
        <th nzWidth="100px">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let def of table.data">
        <td>
          <div class="editable-cell" [hidden]="editId === def.id">
            {{ def.slug }}
          </div>
          <input [hidden]="editId !== def.id" type="text" nz-input [(ngModel)]="def.slug" />
        </td>
        <td>
          <div class="editable-cell" [hidden]="editId === def.id">
            {{ def.defaultValue }}
          </div>
          <input [hidden]="editId !== def.id" type="text" nz-input [(ngModel)]="def.defaultValue" />
        </td>
        <td>
          <button *ngIf="editId !== def.id" nz-button nzType="primary" (click)="startEdit(def.id)">Edit</button>
          <button *ngIf="editId === def.id" nz-button nzType="primary" (click)="stopEdit(def.slug, def.defaultValue)">Save</button>
          <!-- Pas sur les maquettes mais pourra être rajouté facilement -->
          <!--button
            nz-button nzDanger nzType="primary"
            nz-popconfirm
            nzPopconfirmTitle="Are you sure delete this definition ?"
            nzPopconfirmPlacement="bottom"
            nzCancelText="Cancel"
            nzOkText="Confirmer"
            nzOkType="danger"
            (nzOnConfirm)="confirmDelete(def.id)">Delete</button-->
          </td>
        </tr>
      </tbody>
    </nz-table>
  </nz-content>
