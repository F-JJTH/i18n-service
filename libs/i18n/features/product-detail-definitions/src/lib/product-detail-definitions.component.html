<nz-content>
  <header>
    <div nz-row>
      <div nz-col nzSpan="18">
        <form nz-form>
          <nz-form-item>
            <nz-form-control nzSpan="20">
              <input #slugInput nz-input name="slug" type="text" [(ngModel)]="slug" [placeholder]="'SLUG' | translate">
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-control nzSpan="20">
              <nz-input-group [nzAddOnAfter]="product.defaultLanguage">
                <input nz-input name="value" type="text" [(ngModel)]="defaultValue" [placeholder]="'DEFAULT_VALUE' | translate">
              </nz-input-group>
            </nz-form-control>
            <button class="m-l-5"
              nz-button
              nzType="primary"
              [disabled]="!slug || !defaultValue"
              (click)="onAddNewDefinitionClicked()">{{ 'ADD' | translate }}</button>
          </nz-form-item>
        </form>
      </div>
      <div nz-col nzSpan="6" class="text-right">
        <button class="m-l-5"
          nz-button
          nzType="primary"
          (click)="onImportDefinitionsClicked()">{{ 'IMPORT_DEFINITIONS' | translate }}</button>
      </div>
    </div>
  </header>

  <nz-table #table [nzData]="definitions" nzSize="middle" [nzPageSize]="25">
    <thead>
      <tr>
        <th>{{ 'SLUG' | translate }}
          <nz-badge
            nzStandalone
            [nzOverflowCount]="99999"
            [nzCount]="definitions.length"
            [nzStyle]="{ backgroundColor: '#fff', color: '#999', boxShadow: '0 0 0 1px #d9d9d9 inset' }"
          ></nz-badge>
        </th>
        <th>{{ 'DEFAULT_VALUE' | translate }}</th>
        <th nzWidth="100px"></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let def of table.data">
        <td>
          <div class="editable-cell" [hidden]="editId === def.id">
            {{ def.slug }}
            <span class="icon-tools">
              <i nz-icon nzType="link" nzTheme="outline"></i>
              <i nz-icon nzType="picture" nzTheme="outline"></i>
            </span>
          </div>
          <input [hidden]="editId !== def.id" type="text" nz-input [(ngModel)]="def.slug" />
        </td>
        <td>
          <div class="editable-cell" [hidden]="editId === def.id">
            {{ def.defaultValue }}
          </div>
          <input [hidden]="editId !== def.id" type="text" nz-input [(ngModel)]="def.defaultValue" />
        </td>
        <td>
          <nz-button-group *ngIf="editId !== def.id">
            <button nz-button (click)="startEdit(def.id)">{{ 'EDIT' | translate }}</button>
            <button nz-button nz-dropdown [nzDropdownMenu]="menu1" nzPlacement="bottomRight">
              <i nz-icon nzType="ellipsis"></i>
            </button>
          </nz-button-group>
          <button *ngIf="editId === def.id" nz-button nzType="primary" (click)="stopEdit(def.slug, def.defaultValue)">{{ 'SAVE' | translate }}</button>
          <nz-dropdown-menu #menu1="nzDropdownMenu">
            <ul nz-menu>
              <li nz-menu-item (click)="onSetLinkClicked(def)">{{ 'SET_LINK' | translate }}</li>
              <li nz-menu-item (click)="onClearLinkClicked(def)">{{ 'CLEAR_LINK' | translate }}</li>
              <li nz-menu-item (click)="onSetPictureClicked(def)">{{ 'SET_PICTURE' | translate }}</li>
              <li nz-menu-item (click)="onClearPictureClicked(def)">{{ 'CLEAR_PICTURE' | translate }}</li>
            </ul>
          </nz-dropdown-menu>
          <!-- Pas sur les maquettes mais pourra être rajouté facilement -->
          <!--button
            nz-button nzDanger nzType="primary"
            nz-popconfirm
            nzPopconfirmTitle="Are you sure delete this definition ?"
            nzPopconfirmPlacement="bottom"
            nzCancelText="Cancel"
            nzOkText="Confirmer"
            nzOkType="danger"
            (nzOnConfirm)="confirmDelete(def.id)">Delete</button-->
          </td>
        </tr>
      </tbody>
    </nz-table>
  </nz-content>
